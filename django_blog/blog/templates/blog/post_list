{% extends 'blog/base.html' %}

{% block content %}
    <div class="content">
        <h1>Blog Posts</h1>
        {% if user.is_authenticated %}
            <a href="{% url 'post-create' %}" class="btn" style="background-color: #333; color: white; padding: 8px 15px; text-decoration: none; display: inline-block; margin-bottom: 15px;">New Post</a>
        {% endif %}
        
        {% for post in posts %}
            <div style="background: white; padding: 20px; margin-bottom: 20px;">
                <div style="padding-bottom: 10px; margin-bottom: 15px; border-bottom: 1px solid #eee;">
                    <a href="#" style="color: #333; margin-right: 10px;">{{ post.author }}</a>
                    <small class="text-muted">{{ post.published_date|date:"F d, Y" }}</small>
                </div>
                <h2><a href="{% url 'post-detail' post.id %}" style="color: #444; font-size: 24px; margin-bottom: 15px; display: block; text-decoration: none;">{{ post.title }}</a></h2>
                <p style="line-height: 1.6; color: #555;">{{ post.content|truncatechars:300 }}</p>
            </div>
        {% endfor %}
        
        {% if is_paginated %}
            <div style="text-align: center; margin-top: 20px;">
                {% if page_obj.has_previous %}
                    <a href="?page=1" style="padding: 5px 10px; border: 1px solid #dee2e6; color: #333; text-decoration: none; margin: 0 5px;">First</a>
                    <a href="?page={{ page_obj.previous_page_number }}" style="padding: 5px 10px; border: 1px solid #dee2e6; color: #333; text-decoration: none; margin: 0 5px;">Previous</a>
                {% endif %}
                
                {% for num in page_obj.paginator.page_range %}
                    {% if page_obj.number == num %}
                        <a href="?page={{ num }}" style="padding: 5px 10px; background-color: #333; border: 1px solid #333; color: white; text-decoration: none; margin: 0 5px;">{{ num }}</a>
                    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                        <a href="?page={{ num }}" style="padding: 5px 10px; border: 1px solid #dee2e6; color: #333; text-decoration: none; margin: 0 5px;">{{ num }}</a>
                    {% endif %}
                {% endfor %}
                
                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}" style="padding: 5px 10px; border: 1px solid #dee2e6; color: #333; text-decoration: none; margin: 0 5px;">Next</a>
                    <a href="?page={{ page_obj.paginator.num_pages }}" style="padding: 5px 10px; border: 1px solid #dee2e6; color: #333; text-decoration: none; margin: 0 5px;">Last</a>
                {% endif %}
            </div>
        {% endif %}
    </div>
{% endblock %}